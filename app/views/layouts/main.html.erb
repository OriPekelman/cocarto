<!DOCTYPE html>
<html lang="<%= I18n.locale %>">
<head>
  <title><%= t("common.app_title") %></title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <%= csrf_meta_tags %>
  <%= csp_meta_tag %>
  <%= render "application/favicon" %>

  <link href='https://unpkg.com/maplibre-gl@2.1.7/dist/maplibre-gl.css' rel='stylesheet'>
  <%= javascript_importmap_tags %>
  <%= stylesheet_link_tag "main.css", "data-turbo-track": "reload" %>
</head>

<body>
<header class="header header--large">
  <nav class="header__nav">
    <h1 class="header__title header__title--large"><%= link_to t("common.app_title"), user_signed_in? ? maps_path : root_path %></h1>
    <div id="flash">
      <%= render "layouts/flash" %>
    </div>
    <div class="header__right">
      <% if user_signed_in? %>
        <span><%= t("common.hello") %>, <%= current_user.email %></span>
        <%= button_to t("layouts.application.sign_out"), destroy_user_session_path, method: :delete, class: "primary-action" %>
      <% else %>
        <%= link_to t("layouts.application.sign_in"), new_user_session_path, class: "button button--large button--link" %>
        <%= link_to t("layouts.application.sign_up"), new_user_registration_path, class: "button button--large button--confirm" %>
      <% end %>
      <div class="dropdown" data-controller="dropdown">
        <button class="button button--large button--icon button--double" role="button" aria-haspopup="menu" aria-label="<%= t("layouts.application.change_language") %>" aria-controls="languages-selector" data-action="click->dropdown#toggle" data-dropdown-target="trigger">
          <%= embedded_svg("language-selector.svg") %>
        </button>
        <div id="languages-selector" class="dropdown__content" data-dropdown-target="content">
          <div class="card__main-content card__main-content--slim">
            <%= link_to "English", url_for(locale: :en) %>
            <%= link_to "FranÃ§ais", url_for(locale: :fr) %>
          </div>
        </div>
      </div>
    </div>
  </nav>
</header>
<main>
  <%= yield %>
</main>
<footer class="footer__application">
  <p><%= t("layouts.application.footer_html") %></p>
</footer>
</body>
</html>
