<%# params: @layer, @session_id, @user_name %>

<%= turbo_stream_from @layer %>

<div
  class="data-with-map"
  data-action="mousemove@window->dragbar#mousemove mouseup@document->dragbar#mouseup"
  data-controller="map dragbar"
  data-map-editable-value="true"
  data-map-layer-id-value="<%= @layer.id %>"
  data-map-session-id-value="<%= @session_id %>"
  data-map-username-value="<%= @user_name %>">
  <div class="data edit" data-dragbar-target="left">
  <div class="layer-edit">
    <span>&lt; <%= link_to t("all_layer"), layers_path, class: "show_layer" %></span>
    <span><%= link_to t("delete_layer"), @layer, data: {turbo_method: :delete, turbo_confirm: t("delete_confirm")}, class: "delete-edit" %></span>
  </div>
    <%= render "rows/table", layer: @layer %>
    <%= render partial: "tooltip", locals: {layer: @layer} %>
  </div>
  <div class="dragbar" data-dragbar-target="dragbar" data-action="mousedown->dragbar#mousedown"></div>
  <div class="map" data-map-target="map" data-dragbar-target="right">
    <%= render "rows/point/new", layer: @layer %>
  </div>
</div>
